/**
 * Created by hazarapet on 3/11/15.
 */

var http = require('http');
var through2 = require('through2');
var api_config = require("../../config/api_control");

var server = null;

/**
 *
 */
function createServer() {
    server = http.createServer(function(req){
        checker(req);
    });

    return server;
};

/**
 *
 * @param request_stream
 */
function checker(request_stream) {
    request_stream.pipe(through2(function(data,encode,next){
        console.log(data.toString());
        this.push(data);
        next();
    }));
};

/**
 *
 * @param port_number
 * @param host
 */
function listen(port_number, host, err) {
    if(server){
        server.listen(port_number, host);
    }
    else {
        err(new Error("The Server is not created"));
    }
}

createServer();
listen(8000);