/**
 * Created by hazarapet on 3/11/15.
 */

var http = require('http');
var through2 = require('through2');
var config = require("../../config/api_control");
var ee = require("events").EventEmitter;

var server = null;
var event = new ee;

/**
 *
 * @param port_number
 * @param host
 * @param err
 */
function start(port_number, host, err) {
    server = createServer();
    listen(port_number, host, server, err)
}
/**
 *
 */
function createServer() {
    return http.createServer(function(req,res){
        checker(req);
        res.write('');
        res.end();
    });
};

/**
 *
 * @param request_stream
 */
function checker(request_stream) {
    var url = request_stream.url;
    var method = request_stream.method;
    event.emit('default',{hello: 'World'})
};

/**
 *
 * @param port_number
 * @param host
 */
function listen(port_number, host, server, err) {
    if(server){
        server.listen(port_number, host);
    }
    else {
        err(new Error("The Server is not created"));
    }
}
